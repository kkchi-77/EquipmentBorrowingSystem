<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - 數位內容設計研究中心｜設備借用</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="~/css/equipment-system.css" asp-append-version="true" />
    @await RenderSectionAsync("Head", required: false)
</head>
<body>

    <!-- Sidebar Overlay (mobile) -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

    <!-- ==================== SIDEBAR ==================== -->
    <nav class="sidebar" id="sidebar">
        <!-- Brand -->
        <a class="sidebar-brand" href="@Url.Action("Browse_equipment", "BorrowEquipment1")">
            <span class="sidebar-brand-title">數位內容設計研究中心<br>器材設備借用</span>
            <span class="sidebar-brand-badge" style="background-color:#28a745;">
                <i class="bi bi-person-check"></i> 使用者
            </span>
        </a>

        <!-- Navigation -->
        <div class="sidebar-nav">
            <div class="sidebar-section-label">設備借用</div>

            <a class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "Browse_equipment" || ViewContext.RouteData.Values["action"]?.ToString() == "Browse_equipment1" ? "active" : "")"
               href="@Url.Action("Browse_equipment", "BorrowEquipment1")">
                <i class="bi bi-search"></i>
                瀏覽可借用器材
            </a>

            <a class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "Application_List" ? "active" : "")"
               href="@Url.Action("Application_List", "BorrowEquipment1")">
                <i class="bi bi-cart3"></i>
                申請清單
            </a>

            <a class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "Application_Status" ? "active" : "")"
               href="@Url.Action("Application_Status", "BorrowEquipment1")">
                <i class="bi bi-list-check"></i>
                查詢申請狀態
            </a>
        </div>

        <!-- Footer -->
        <div class="sidebar-footer">
            <a class="nav-link" href="@Url.Action("Login", "Manager")" style="font-size:0.8rem;opacity:.7;">
                <i class="bi bi-shield-lock"></i>
                管理者入口
            </a>
            <div style="font-size:0.72rem;color:#4a5057;padding:0.25rem 0;margin-top:0.5rem;">
                <a href="https://www.ddc.tw/" style="color:#4a5057;">© 數位內容設計研究中心</a>
            </div>
        </div>
    </nav>

    <!-- ==================== MAIN WRAPPER ==================== -->
    <div class="main-wrapper" id="mainWrapper">

        <!-- Topbar -->
        <header class="topbar">
            <div class="topbar-left">
                <button class="sidebar-toggle-btn" id="sidebarToggle" onclick="toggleSidebar()" title="展開/收合選單">
                    <i class="bi bi-list"></i>
                </button>
                <h1 class="topbar-page-title">@(ViewData["Title"] ?? "設備借用")</h1>
            </div>
            <div class="topbar-right">
                <div class="topbar-user-info">
                    <div class="topbar-user-avatar" style="background:rgba(40,167,69,0.15);color:#1a7a33;">
                        <i class="bi bi-person-fill"></i>
                    </div>
                    <span class="d-none d-sm-inline" style="font-size:.85rem;">使用者</span>
                </div>
            </div>
        </header>

        <!-- Content -->
        <main class="content-area">
            @RenderBody()
        </main>

        <!-- Footer -->
        <footer class="site-footer">
            <a href="https://www.ddc.tw/">數位內容設計研究中心</a>
        </footer>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <script>
        function toggleSidebar() {
            var sidebar = document.getElementById('sidebar');
            var overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.toggle('sidebar-open');
            overlay.classList.toggle('show');
        }

        function closeSidebar() {
            var sidebar = document.getElementById('sidebar');
            var overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.remove('sidebar-open');
            overlay.classList.remove('show');
        }
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
